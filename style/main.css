/* style/main.css - ATUALIZADO PARA ASSETS/BOT */

* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
body {
  font-family: 'Segoe UI', 'Montserrat', sans-serif;
  background: #f0f2f5; color: #333; text-align: center;
  overflow-x: hidden; overflow-y: auto; min-height: 100vh;
}
html, body, #tela-fila, #tela-gestao { -webkit-user-select: none; user-select: none; }
img { -webkit-user-drag: none; user-drag: none; }

h1 { margin-top: 30px; font-size: 28px; font-weight: 800; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 20px; color: #4f8d4f; position: relative; z-index: 10; }
#tela-fila, #tela-gestao { padding-top: 20px; position: relative; z-index: 5; padding-bottom: 120px; }

/* ÁREA DE MENSAGEM VAZIA (GESTÃO) */
.empty-state { grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 40px; animation: fadeIn 0.5s ease; }
.empty-state h2 { font-size: 24px; color: #d64949; text-transform: uppercase; font-weight: 800; margin: 20px 0 10px 0; }
.empty-state p { font-size: 16px; color: #666; }
.empty-state img { width: 120px; opacity: 0.9; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* FOTO PRINCIPAL */
#atual-layout { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-top: 10px; position: relative; z-index: 10; }
#nome-atual { font-weight: 800; font-size: 38px; letter-spacing: 0.5px; color: #2c3e50; margin-bottom: 5px; }
#atual-container { position: relative; display: flex; flex-direction: column; align-items: center; }

#foto-atual {
  height: 45vh; max-height: 400px; width: auto; aspect-ratio: 1/1;
  object-fit: cover; object-position: top; 
  border-radius: 50%; border: 6px solid #fff; 
  box-shadow: 0 10px 25px rgba(0,0,0,0.15); background: #e0e0e0; position: relative; z-index: 2; transition: all 0.3s ease;
}

/* 1. Pulsa Verde (Tem Atendimento) */
#foto-atual:not([src*="sem-atendimento.png"]):not([src*="mascote-idle"]) { 
    animation: pulse-green 2s infinite; 
}

/* 2. ELYSE EM PÉ (Fila Vazia no Centro) */
#foto-atual[src*="mascote-idle"] {
    border: 5px dashed #4f8d4f; 
    background: #fff;
    padding: 10px;
    object-fit: contain;
    opacity: 1;
    filter: none; 
}

/* 3. Ícone Antigo (Backup) */
#foto-atual[src*="sem-atendimento.png"] { border: 4px dashed #ccc; filter: grayscale(1); opacity: 0.6; object-position: center; border-radius: 20px; }

@keyframes pulse-green {
    0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
    70% { box-shadow: 0 0 0 20px rgba(40, 167, 69, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
}

#botoes-container { margin: 30px 0; display: flex; gap: 20px; justify-content: center; z-index: 20; }
#botoes-container button { display: inline-flex; align-items: center; justify-content: center; gap: 10px; padding: 12px 25px; border-radius: 30px; border: none; cursor: pointer; transition: transform 0.1s ease; min-width: 180px; font-weight: 700; font-size: 15px; text-transform: uppercase; color: #fff; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
#btn-atendi { background: #28a745; border-bottom: 4px solid #1e7e34; }
#btn-atendi:hover { background: #218838; transform: translateY(2px); border-bottom-width: 2px; }
#btn-atendi:active { transform: translateY(4px); border-bottom-width: 0px; }
#btn-pular { background: #fd7e14; border-bottom: 4px solid #d66408; }
#btn-pular:hover { background: #e86e0c; transform: translateY(2px); border-bottom-width: 2px; }
#btn-pular:active { transform: translateY(4px); border-bottom-width: 0px; }
#btn-gestao { background: #6c757d; border-bottom: 4px solid #545b62; }
#btn-gestao:hover { background: #5a6268; transform: translateY(2px); border-bottom-width: 2px; }
.icon-btn { width: 20px; height: 20px; filter: brightness(0) invert(1); }

.cards-container { display: flex; justify-content: center; gap: 20px; width: 90%; max-width: 1000px; margin: 0 auto 30px auto; z-index: 5; flex-wrap: wrap; }
.card-fila { background: #fff; border-radius: 15px; padding: 10px; width: 160px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #eee; transition: transform 0.2s; }
.card-fila:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0,0,0,0.15); }
.card-photo { width: 100%; aspect-ratio: 1/1; object-fit: cover; object-position: top; border-radius: 10px; margin-bottom: 10px; border: 1px solid #eee; }
.card-title { font-weight: 700; font-size: 14px; color: #333; }

#tabela-fila { width: 90%; max-width: 1000px; border-collapse: collapse; margin: 0 auto; font-size: 15px; z-index: 5; background: #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-radius: 12px; overflow: hidden; }
#tabela-fila thead { background: #4f8d4f; color: #fff; }
#tabela-fila thead th { padding: 15px; font-weight: 700; text-transform: uppercase; font-size: 13px; }
#tabela-fila tbody tr { border-bottom: 1px solid #eee; }
#tabela-fila tbody tr:last-child { border-bottom: none; }
#tabela-fila tbody td { padding: 15px; color: #555; font-weight: 500; }
#tabela-fila tbody tr:nth-child(1) { background: #f0fff4; }
#tabela-fila tbody tr:nth-child(1) td { color: #28a745; font-weight: 800; }

#balconistas-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 25px; max-width: 900px; margin: 20px auto; }
.bloco-foto { background: #fff; padding: 10px; border-radius: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s; }
.bloco-foto img { border-radius: 10px; width: 100%; aspect-ratio: 1/1; object-fit: cover; object-position: top; }
.bloco-foto:hover { transform: scale(1.03); cursor: pointer; }
.balconista-nome { color: #333; margin-top: 10px; font-weight: 700; font-size: 15px; }
.selected-for-deletion { border: 2px solid #dc3545; background: #ffe6e6; }
img.balconista-off-queue { filter: grayscale(100%); opacity: 0.5; transition: all 0.3s ease; }
.bloco-foto:hover img.balconista-off-queue { filter: grayscale(0%); opacity: 1; }

.btn-toggle-deletion, #btn-adicionar-balconista, #btn-ok { padding: 10px 20px; border-radius: 25px; border: none; color: #fff; cursor: pointer; font-weight: 700; box-shadow: 0 3px 6px rgba(0,0,0,0.15); }
.btn-toggle-deletion { background: #dc3545; }
#btn-adicionar-balconista { background: #007bff; }
#btn-ok { background: #6c757d; }

#modal-overlay, #modal-ajuda { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(3px); display: flex; justify-content: center; align-items: center; z-index: 9999; }
#modal-content, .ajuda-content { background: #fff; color: #333; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; text-align: left; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 1px solid #ddd; }
.ajuda-content h2, #modal-content h2 { color: #4f8d4f; border-bottom: 2px solid #f0f0f0; margin-top: 0; padding-bottom: 15px; text-align: center; }
.ajuda-item strong { color: #2c3e50; font-size: 16px; } .ajuda-item p { color: #555; margin-top: 5px;} .ajuda-item ul { padding-left: 20px; color: #555; }

#modal-nome { background: #fff; border: 2px solid #ddd; color: #333; padding: 12px; border-radius: 8px; width: 100%; margin-bottom: 15px; }
#modal-nome:focus { outline: none; border-color: #4f8d4f; }
#image-gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
.gallery-option { width: 100%; aspect-ratio: 1/1; border-radius: 8px; overflow: hidden; cursor: pointer; border: 2px solid #eee; transition: transform 0.1s; }
.gallery-option img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
.gallery-option.selected { border-color: #28a745; border-width: 4px; transform: scale(1.05); }

#modal-image-preview { width: 120px; height: 120px; background: #f9f9f9; border: 2px dashed #ccc; border-radius: 50%; margin: 10px auto; display: flex; align-items: center; justify-content: center; overflow: hidden; }
#modal-image-preview img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
#btn-selecionar-imagem-modal { background: #e9ecef; color: #333; border: 1px solid #ced4da; width: 100%; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: 600; }
#btn-selecionar-imagem-modal:hover { background: #dee2e6; }
.actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; }
.actions button { flex: 1; padding: 12px; border-radius: 25px; border: none; font-weight: bold; cursor: pointer; }
#btn-salvar-modal { background: #28a745; color: white; }
#btn-salvar-modal:disabled { background: #ccc; cursor: not-allowed; }
#btn-cancelar-modal { background: #dc3545; color: white; }
#btn-fechar-ajuda { background: #333; color: white; border: none; padding: 10px 25px; border-radius: 20px; cursor: pointer; font-weight: bold; }

@keyframes pacman-open-close { 0%, 100% { clip-path: polygon(0 0, 100% 0, 100% 35%, 35% 35%, 35% 65%, 100% 65%, 100% 100%, 0 100%); } 50% { clip-path: polygon(0 0, 100% 0, 100% 50%, 50% 50%, 50% 50%, 100% 50%, 100% 100%, 0 100%); } }
@keyframes dot-chase { 0% { transform: translateX(0); opacity: 1; } 100% { transform: translateX(-40px); opacity: 0; } }
.pacman-loader { display: none; align-items: center; justify-content: center; width: 100%; height: 20px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
.pacman { width: 15px; height: 15px; background: yellow; border-radius: 50%; animation: pacman-open-close 0.4s infinite alternate; position: relative; z-index: 2; margin-right: 15px; }
.dot { width: 4px; height: 4px; background: #fff; border-radius: 50%; position: absolute; left: 100%; animation: dot-chase 1s infinite linear; opacity: 0; }
.dot:nth-child(2) { animation-delay: 0s; left: 60%; } .dot:nth-child(3) { animation-delay: 0.33s; left: 40%; } .dot:nth-child(4) { animation-delay: 0.66s; left: 20%; }
#btn-salvar-modal.loading .button-text { display: none !important; }
#btn-salvar-modal.loading .pacman-loader { display: flex !important; }

#mascote-container { position: fixed; bottom: 50px; left: 20px; z-index: 50; cursor: grab; user-select: none; }
#mascote-container:active { cursor: grabbing; }
#mascote-img { width: 220px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3)); transition: transform 0.2s; -webkit-user-drag: none; }
#mascote-img:hover { transform: scale(1.05); }

#mascote-balao { position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%) translateY(10px) scale(0.9); margin-bottom: 20px; background: #ffffff; color: #000000; border: 2px solid #000000; border-radius: 15px; padding: 15px 20px; font-weight: 700; font-size: 14px; text-align: center; min-width: 180px; box-shadow: 3px 3px 0px rgba(0,0,0,0.2); opacity: 0; pointer-events: none; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 60; }
#mascote-balao.visible { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
#mascote-balao::after { content: ''; position: absolute; bottom: -10px; left: 50%; margin-left: -10px; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid #000000; }
#mascote-balao::before { content: ''; position: absolute; bottom: -6px; left: 50%; margin-left: -7px; width: 0; height: 0; border-left: 7px solid transparent; border-right: 7px solid transparent; border-top: 7px solid #ffffff; z-index: 1; }

.news-ticker { position: fixed; bottom: 0; left: 0; width: 100%; background: #d32f2f; color: #fff; height: 40px; display: flex; align-items: center; border-top: 2px solid #b71c1c; z-index: 100; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
.ticker-content { white-space: nowrap; animation: ticker-move 400s linear infinite; font-weight: 700; font-size: 16px; padding-left: 100%; letter-spacing: 0.5px; }
@keyframes ticker-move { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

@media (max-width: 800px) { #nome-atual { font-size: 28px; } #foto-atual { height: 35vh; } .card-fila { width: 140px; } }